<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Ian Uther Lawson &lt;uther@redhat.com&gt;">
<title>Openshift Introduction: Workshop for developers</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Openshift Introduction: Workshop for developers</h1>
<div class="details">
<span id="author" class="author">Ian Uther Lawson</span><br>
<span id="email" class="email"><a href="mailto:uther@redhat.com">uther@redhat.com</a></span><br>
<span id="revnumber">version 1.0.0,</span>
<span id="revdate">July 31, 2019</span>
<br><span id="revremark">Draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">Introduction</a>
<ul class="sectlevel2">
<li><a href="#attendee-details">Attendee details</a></li>
</ul>
</li>
<li><a href="#setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#setup-webconsole">Web console</a></li>
<li><a href="#setup-cli">CLI (oc)</a>
<ul class="sectlevel3">
<li><a href="#option-1-installing-the-cli-on-localhost">Option 1: Installing the CLI on localhost</a></li>
<li><a href="#option-2-use-a-pre-configured-docker-image-on-openshift">Option 2: Use a pre-configured docker image on OpenShift</a></li>
</ul>
</li>
<li><a href="#setup-login">Using your terminal (Both options)</a></li>
</ul>
</li>
<li><a href="#webconsole">Web Console overview</a>
<ul class="sectlevel2">
<li><a href="#sandbox-project">Sandbox project</a></li>
<li><a href="#build-options">Build options</a></li>
<li><a href="#the-catalog">The catalog</a></li>
</ul>
</li>
<li><a href="#lifecycle">Simple application lifecycle</a>
<ul class="sectlevel2">
<li><a href="#lifecycle-s2i">Deploying an application using S2I</a></li>
<li><a href="#lifecycle-running">The running application</a>
<ul class="sectlevel3">
<li><a href="#lifecycle-application-services">Application Services</a></li>
<li><a href="#lifecycle-application-pods">Application Pods</a></li>
<li><a href="#lifecycle-application-scaling">Application Scaling</a></li>
<li><a href="#lifecycle-application-route">Application Route</a></li>
<li><a href="#lifecycle-application-cli">Application from CLI</a></li>
<li><a href="#lifecycle-health-checks">Health Checks</a></li>
<li><a href="#lifecycle-rolling-recreate">Application Deployment Strategies</a></li>
<li><a href="#lifecycle-storage">Storage</a></li>
<li><a href="#lifecycle-config-maps">Config Maps</a></li>
<li><a href="#lifecycle-secrets">Secrets</a></li>
</ul>
</li>
<li><a href="#lifecycle-cleanup">Clean up</a></li>
</ul>
</li>
<li><a href="#sdn">Software Defined Networking</a></li>
<li><a href="#rbac">User Role based access control</a></li>
<li><a href="#pipeline">CICD Pipeline</a></li>
<li><a href="#wrapup">Wrap-up</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="intro"><a class="anchor" href="#intro"></a>Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="attendee-details"><a class="anchor" href="#attendee-details"></a>Attendee details</h3>
<div class="paragraph">
<p>This workshop is designed to give developers an introduction to Openshift</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add basic <em>What is Openshift</em> section ?</p>
</div>
<div class="paragraph">
<p>Add more info in the intended audience.</p>
</div>
<div class="paragraph">
<p>Add relevant links</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup"><a class="anchor" href="#setup"></a>Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="setup-webconsole"><a class="anchor" href="#setup-webconsole"></a>Web console</h3>
<div class="paragraph">
<p>You will be assigned an ID by the facilitator. At any time that the content refer to userX, (or <em>anything_X) you need to replace X with your ID.
Your userId to log onto the web console will be _userX</em> and the password will be <em>openshift</em></p>
</div>
<div class="paragraph">
<p>You can access the web console using your browser:</p>
</div>
<div class="paragraph">
<p><a href="http://myopenshift.com">http://myopenshift.com</a></p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> If your ID is <code>1</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Username:</strong> user1</p>
</li>
<li>
<p><strong>Password:</strong> openshift</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Log In</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_login.png" alt="Login">
</div>
</div>
</div>
<div class="sect2">
<h3 id="setup-cli"><a class="anchor" href="#setup-cli"></a>CLI (oc)</h3>
<div class="paragraph">
<p>With the OpenShift Enterprise command line interface (CLI), you can create applications and manage OpenShift projects from a terminal.
The CLI is ideal in situations where you are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Working directly with project source code.</p>
</li>
<li>
<p>Scripting OpenShift Enterprise operations.</p>
</li>
<li>
<p>Restricted by bandwidth resources and cannot use the web console.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The CLI is available using the oc command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc {command}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have two options to get a working CLI. Either install <code>oc</code> on your localhost or use a docker image in OpenShift:</p>
</div>
<div class="sect3">
<h4 id="option-1-installing-the-cli-on-localhost"><a class="anchor" href="#option-1-installing-the-cli-on-localhost"></a>Option 1: Installing the CLI on localhost</h4>
<div class="paragraph">
<p>The easiest way to download the CLI is by accessing the About page on the web console [ (?)&#8594; About ]</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_cli.png" alt="About CLI">
</div>
</div>
<div class="paragraph">
<p>or you can follow the instructions from the <a href="https://docs.openshift.com/container-platform/3.11/cli_reference/get_started_cli.html">official documentation</a></p>
</div>
</div>
<div class="sect3">
<h4 id="option-2-use-a-pre-configured-docker-image-on-openshift"><a class="anchor" href="#option-2-use-a-pre-configured-docker-image-on-openshift"></a>Option 2: Use a pre-configured docker image on OpenShift</h4>
<div class="paragraph">
<p>This option install and run a docker image inside OpenShift that already has oc installed and configured.
To install this image, do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login to the OCP system through the UI. (userX / openshift)</p>
</li>
<li>
<p>Create a new project:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> oconline-userX</p>
</li>
<li>
<p><strong>Display Name:</strong> OC Terminal</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_oc_terminal.png" alt="OC terminal">
</div>
</div>
<div class="paragraph">
<p>Select the newly created <code>OC Terminal</code> project and then select <code>Deploy Image</code></p>
</div>
<div class="paragraph">
<p>Use the Image Name option and add the following name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">quay.io/ilawson/oconline:latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Search</b> and then leave the default values in the metadata form and click <b class="button">Deploy</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_oc_docker_image.png" alt="Deploy image">
</div>
</div>
<div class="paragraph">
<p>Once the image has deployed and a Pod will appear</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the Pod ring (blue)</p>
</li>
<li>
<p>Select <code>Terminal</code> from the options (This will be <em>your terminal</em> you can use to do <code>oc</code> commands)</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It might be easier to keep this project with the terminal view open in a separate browser tab, so that you  can switch back and forth to it easy
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setup-login"><a class="anchor" href="#setup-login"></a>Using your terminal (Both options)</h3>
<div class="paragraph">
<p>If this document refer to <em>your terminal</em> it will either be on your localhost or the docker install terminal depending your option above.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the Web Console, select the top right pulldown, choose <b class="button">Copy Login Command</b></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_copy_login.png" alt="Deploy image">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Paste that command into <em>your terminal</em>, hit return - hit ‘y’ for insecure access</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_terminal.png" alt="Deploy image">
</div>
</div>
<div class="paragraph">
<p>Make sure <code>oc</code> is working, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc whoami
oc version</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_whoami_version.png" alt="Basic oc commands">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Also see the <strong>Command-Line Walkthrough</strong>: <a href="https://docs.openshift.com/container-platform/3.11/getting_started/developers_cli.html">https://docs.openshift.com/container-platform/3.11/getting_started/developers_cli.html</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="webconsole"><a class="anchor" href="#webconsole"></a>Web Console overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="sandbox-project"><a class="anchor" href="#sandbox-project"></a>Sandbox project</h3>
<div class="paragraph">
<p>So you have already created your first project using the web console (<code>oconline-userX</code>).</p>
</div>
<div class="paragraph">
<p>Let&#8217;s create another project where we can play in:</p>
</div>
<div class="paragraph">
<p><strong>Create a new project:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> sandbox-userX</p>
</li>
<li>
<p><strong>Display Name:</strong> Sandbox</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b></p>
</div>
<div class="paragraph">
<p>You should now have 2 projects like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_sandbox.png" alt="Sandbox">
</div>
</div>
<div class="paragraph">
<p>Click the <strong>Sandbox</strong> project to go to the <em>Application Console</em> for that project, you will see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Project selector</strong> (top left): Here you can switch between your projects</p>
</li>
<li>
<p><strong>Menu</strong> (left): This is all the sections available.</p>
</li>
<li>
<p><strong>Context area</strong> (center): This will display content based on the menu item selected.</p>
</li>
<li>
<p><strong>User menu</strong> (top right): Here you can get the cli login command.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_application_console.png" alt="Sandbox">
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-options"><a class="anchor" href="#build-options"></a>Build options</h3>
<div class="paragraph">
<p>A build is the process of transforming input parameters into a resulting object.
Most often, the process is used to transform input parameters or source code into a runnable image.
A BuildConfig object is the definition of the entire build process.
OpenShift Container Platform leverages Kubernetes by creating Docker-formatted containers from build images and pushing them to a container image registry.
Build objects share common characteristics: inputs for a build, the need to complete a build process,
logging the build process, publishing resources from successful builds,
and publishing the final status of the build. Builds take advantage of resource restrictions,
specifying limitations on resources such as CPU usage, memory usage, and build or pod execution time.</p>
</div>
<div class="paragraph">
<p>The OpenShift Container Platform build system provides extensible support for build strategies that are based on selectable types specified in the build API.
There are three primary build strategies available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Docker build</p>
</li>
<li>
<p>Source-to-Image (S2I) build</p>
</li>
<li>
<p>Custom build</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, Docker builds and S2I builds are supported.
The resulting object of a build depends on the builder used to create it. For Docker and S2I builds, the resulting objects are runnable images.
For Custom builds, the resulting objects are whatever the builder image author has specified.</p>
</div>
<div class="paragraph">
<p>Additionally, the Pipeline build strategy can be used to implement sophisticated workflows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>continuous integration</p>
</li>
<li>
<p>continuous deployment</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Also see the <strong>Builds and Image Streams</strong>:
<a href="https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/builds_and_image_streams.html#builds">https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/builds_and_image_streams.html#builds</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We have already done a docker build with <code>oconline</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-catalog"><a class="anchor" href="#the-catalog"></a>The catalog</h3>
<div class="paragraph">
<p>Click <b class="button">Browse Catalog</b>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
OpenShift Container Platform provides out of the box a set of languages and databases for developers with corresponding
implementations and tutorials that allow you to kickstart your application development.
Language support centers around the Quickstart templates, which in turn leverage builder images.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Openshift</strong> is effectively <strong>Kubernetes</strong>, and as such it works with Objects that are part of the
Kubernetes/Openshift Object model. When interacting with this model through the interfaces, be it CLI via 'oc' or
the web interface, a User is creating, deleting and changing Objects in this model.</p>
</div>
<div class="paragraph">
<p>The <strong>Catalog</strong> is designed as a quickstart way to interact with the Openshift instance by pre-creating the
objects you need for a specific Application. It does this by providing Templates, which are pre-created sets of
objects with parameterised components that have to be provided to create the application - a good
example of this is the node.js Template, which requires only three initial parameters (with a lot of advanced and
optional parameters for deeper configuration) to create a full Application within Openshift.</p>
</div>
<div class="paragraph">
<p>These parameters, in the case of the node.js Template, are the base image to build upon, the name to assign to all the Objects created as part of the
Template and the git repo containing the node.js source to build into the Application
image. When you choose this Template from the catalog you are provided with a Wizard that prompts for
those three essential parameters (plus provides advanced inputs for the additional ones).</p>
</div>
<div class="paragraph">
<p>There is another type of Template supported by Openshift called a 'Quickstart'. This is identical in theory to
the Template but instead has all the required Parameters pre-defined so a User can simply create an instance
of the Quickstart without having to provide any information other than the name of the Application to create.</p>
</div>
<div class="paragraph">
<p>In Openshift 3 the Catalog also supports <strong>Services</strong>. This is an implementation of the Service Broker concept and allows external and pre-created Services,
where Service in this case refers to an external Service providing functionality as opposed to the services internally which are
Application endpoints within Openshift. Services provided via the Service Broker are external interfaces with a provided
Service definition that defines how to call them and what they contain. A User can add a Service to his namespace/project, and when he does
that Service is callable vie the defined interface from his Applications in the namespace/project. This functionality is being
wound down as part of Openshift 4 with the functionality being instead provided by <strong>Operators</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Operators</strong> are a fantastic new concept that simplifies the administration and on-going maintenance of Kubernetes applications. How they work is very elegant -
an Operator maintains the state of a set of Objects within the Openshift/Kubernetes object model <strong>but</strong> can also extend it. An Operator is itself a running Pod, and this Pod
handles installation of Objects, updates of Objects and monitoring and response to change events in the Object state and behaviour.</p>
</div>
<div class="paragraph">
<p>An easier explanation is this - imagine you are writing an Application that needs to be deployed in Openshift. This Application is complex, consisting of multiple
Pods, configuration options, and you want to be able to update it in real time as fast as you can. By producing an Operator, which installs the Object model and
then can act on changes and events concerning it (which it does by extending the Openshift/Kubernetes Object model with Custom Resource Definitions, which can then be
triggered to be updated by simply providing updated YAML defintitions of the type defined), the Application can be deployed simply by passing the appropriate
YAML for the Custom Resource, which is specific and contextual <em>only</em> to the Application, to the Operator.</p>
</div>
<div class="paragraph">
<p>Red Hat has been instrumental in creating the operatorhub.io site, where people can publish Operators than can be easily consumed by Openshift 4. In fact
the functionality for Operators has been back ported into Openshift 3.11 because it is so powerful and essential. As of Openshift 4 the Catalog has direct
linkage to the operatorhub and allows Users to request Operators to consume.</p>
</div>
<div class="paragraph">
<p>Interestingly these are handled in a much more secure way than with vanilla Kubernetes. The Operator, when installed, needs to alter the core Object model of the Cluster,
which is very dangerous. Openshift prohibits the installation of Operators (you need Cluster Admin anyway) by implementing an Operator itself, called the Operator Lifecycle Manager.</p>
</div>
<div class="paragraph">
<p>This Operator (shortened to <strong>OLM</strong>) allows Admins to install Operators as <em>Subscriptions</em> which can then be used by named Users, Projects or globally depending on
the security required. The OLM handles the update of the Operators, and the Users can consume them simply by creating Objects of the appropriate Custom Resource. This way
Users do not need to install the Operators themselves - installation and Object model update is controlled centrally by the OLM and Administrators.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain how the catalog works in terms of templates, quickstarts, services, (optional) operators.</p>
</div>
<div class="paragraph">
<p>Explain in detail - templates are object model definitions that require additional parameters.</p>
</div>
<div class="paragraph">
<p>Explain in detail - quickstarts are object models definitions that contain predefined parameter values.</p>
</div>
<div class="paragraph">
<p>Explain the oauth token (derived from the 'copy login command')</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Also see the <strong>Web Console Walkthrough</strong>:
<a href="https://docs.openshift.com/container-platform/3.11/getting_started/developers_console.html">https://docs.openshift.com/container-platform/3.11/getting_started/developers_console.html</a>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lifecycle"><a class="anchor" href="#lifecycle"></a>Simple application lifecycle</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Describe the scripts within an S2I build (compile, assemble, execute)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle-s2i"><a class="anchor" href="#lifecycle-s2i"></a>Deploying an application using S2I</h3>
<div class="paragraph">
<p>In the Catalog of your sandbox project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Filter (top tab bar) <strong>Languages</strong></p>
</li>
<li>
<p>Select <strong>JavaScript</strong></p>
</li>
<li>
<p>Choose <strong>Node.js</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_catalog_filter_js.png" alt="Node application">
</div>
</div>
<div class="paragraph">
<p>You will now go though a wizard to gather all data needed for this S2I build config:</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the wizards</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <b class="button">Next</b> on first page of Wizard.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the parameter fields as pertains to templates</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select node image version <strong>10</strong></p>
</li>
<li>
<p>Enter name as <code>nodetest</code></p>
</li>
<li>
<p>Enter the following url as the github repo <a href="https://github.com/utherp0/ocpnode">https://github.com/utherp0/ocpnode</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b>, then <b class="button">Close</b> to close the wizard</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_s2i_wizard.png" alt="S2I Wizard">
</div>
</div>
<div class="paragraph">
<p>Now go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the behaviour that is happening, the creation of the objects from the template,
the build-config being used by the build, the build delivering the image into the registry,
the deployment-config waiting on the image arrival, the default single Pod deployment, the creation of the route</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle-running"><a class="anchor" href="#lifecycle-running"></a>The running application</h3>
<div class="paragraph">
<p>When in the Overview page, you will see all running applications. Expand the <code>nodetest</code> application we just deployed.
You will see an overview of the running application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Information on the running container</p>
</li>
<li>
<p>Number of pods and the status (a.k.a <kbd>Pod ring</kbd>) of the pods</p>
</li>
<li>
<p>Networking information including internal port mapping and external routes</p>
</li>
<li>
<p>Build history and information</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_app_overview.png" alt="Application Overview">
</div>
</div>
<div class="paragraph">
<p>To see the application in action, click on the link in the external route.
This will open the basic node.js application:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_node_app.png" alt="Node.js Application">
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-application-services"><a class="anchor" href="#lifecycle-application-services"></a>Application Services</h4>
<div class="paragraph">
<p>Using the menu on the left go to the <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Services</b></span> page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_app_services.png" alt="Application Services">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the single service endpoint for the application - note the cluster IP address</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
More info here:
<a href="https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/pods_and_services.html#services">https://docs.openshift.com/container-platform/3.11/architecture/core_concepts/pods_and_services.html#services</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Go back to the <b class="menuref">Overview</b> page.</p>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-application-pods"><a class="anchor" href="#lifecycle-application-pods"></a>Application Pods</h4>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd>, or alternatively use the menu <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Pods</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">nodetest-<strong>*</strong>*</b></span></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_app_pod.png" alt="Application Pod">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the differing IP address for the Pod compared to the cluster IP
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Go back to the <b class="menuref">Overview</b> page.</p>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-application-scaling"><a class="anchor" href="#lifecycle-application-scaling"></a>Application Scaling</h4>
<div class="paragraph">
<p>Let&#8217;s pretend that this app is suddenly getting many requests from many users (so there is a load increase on the app).
So we need to scale the application to 3 instances.</p>
</div>
<div class="paragraph">
<p>Click the <b class="menuref">Up arrow</b> (^) until there are 3 replicas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_scaling_up.png" alt="Application Scaling">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the blue, gray, dark blue, red colour schemes for the Pod behaviors</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd>, or alternatively use the menu <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Deployments</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">nodetest</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">#1 (latest)</b></span>.</p>
</div>
<div class="paragraph">
<p>Scroll down to where the Pods are listed:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_app_pods_3.png" alt="Pod listing">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the difference in age between the initial pod and the 2 recent scaled pods.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Select on of the recent (younger) pods.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note the IP difference compared to the initial pod.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the load-balancing of Pod IP endpoints from the singular cluster IP and how that abstracts from the Route.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-application-route"><a class="anchor" href="#lifecycle-application-route"></a>Application Route</h4>
<div class="paragraph">
<p>Using the menu on the left go to the <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Routes</b></span> page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_app_routes.png" alt="Application Routes">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note the mapping of the fully qualified domain name to the cluster IP via the service name
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Select the nodetest link in the service column.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_route_service.png" alt="Route service">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that the route maps to the cluster IP
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-application-cli"><a class="anchor" href="#lifecycle-application-cli"></a>Application from CLI</h4>
<div class="paragraph">
<p>Now let&#8217;s go to the console (either using <code>localhost</code> or <code>oconline</code> as explained in the <a href="#setup-cli">CLI (oc)</a> section)</p>
</div>
<div class="paragraph">
<p>Make sure you are still logged in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc whoami</code></pre>
</div>
</div>
<div class="paragraph">
<p>(if not, log in again as explained in the <a href="#setup-login">Using your terminal (Both options)</a> section)</p>
</div>
<div class="paragraph">
<p>Make sure we are using our sandbox project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc project sandbox-userX</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will print:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Now using project "sandbox-userX" on server "http://myopenshift.com:443".</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find all <code>objects</code> that you can interact with in this namespace/project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get all</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get all <code>pods</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get pods -o wide</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will output something similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">NAME               READY     STATUS      RESTARTS   AGE       IP          NODE                      NOMINATED NODE
nodetest-1-2g2dz   1/1       Running     0          23h       10.1.2.67   node1.jhb-94d8.internal   &lt;none&gt;
nodetest-1-54fw7   1/1       Running     0          3h        10.1.2.74   node1.jhb-94d8.internal   &lt;none&gt;
nodetest-1-6xw6g   1/1       Running     0          3h        10.1.2.75   node1.jhb-94d8.internal   &lt;none&gt;
nodetest-1-build   0/1       Completed   0          23h       10.1.2.65   node1.jhb-94d8.internal   &lt;none&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note the pod used to build the project is there, just inactive.<br>
Also note the differing IPs for the individual Pods and the NODE information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the Web Console, make sure you are on the <b class="button">Overview</b> page, then do the following in CLI while watching the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc delete pod nodetest-****</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Replace <strong><strong></strong></strong>** with once of the running pods)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_deleting_pod.png" alt="Deleting a pod">
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of Liveness (kill/restart) and Readiness (if not ready Pod IP is removed from the round-robin HAProxy)</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-health-checks"><a class="anchor" href="#lifecycle-health-checks"></a>Health Checks</h4>
<div class="paragraph">
<p>In the Web Console, go to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Deployments</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">nodetest</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Configuration</b></span>.</p>
</div>
<div class="paragraph">
<p>Under Template, click <code>Add Health Checks</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_add_health.png" alt="Adding Health Checks">
</div>
</div>
<div class="paragraph">
<p>TIP:
Click on the <code>Learn More</code> link or
here: <a href="https://docs.openshift.com/container-platform/3.11/dev_guide/application_health.html">https://docs.openshift.com/container-platform/3.11/dev_guide/application_health.html</a>
to read more about Health probes</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the concepts of the readiness and health probes</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-rolling-recreate"><a class="anchor" href="#lifecycle-rolling-recreate"></a>Application Deployment Strategies</h4>
<div class="paragraph">
<p>From the menu: <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Deployment</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">nodetest</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Configuration</b></span></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain rolling and recreate - explain deployment triggers (image and config)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>In the top right corner, click the <b class="button">Actions &gt; Edit</b> button.</p>
</div>
<div class="paragraph">
<p>Change the <b class="button">Strategy Type</b> to <code>Recreate</code> and click <b class="button">Save</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_deployment_recreate.png" alt="Recreate">
</div>
</div>
<div class="paragraph">
<p>Now go to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Deployments</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">notetest</b></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that Deployment \#1 is active.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click the <b class="button">Deploy</b> button (top right) and the quickly go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_deployment_recreate_pod_ring.png" alt="Recreate in action">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that all instances is being recreate and there is zero instances available above.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Go back to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Deployments</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">notetest</b></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that Deployment \#2 is active.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Change back to Rolling Strategy: <b class="button">Actions &gt; Edit</b> then change the
<b class="button">Strategy Type</b> to <code>Rolling</code> and click <b class="button">Save</b></p>
</div>
<div class="paragraph">
<p>Now again click the <b class="button">Deploy</b> and quickly go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_deployment_rolling_pod_ring.png" alt="Rolling in action">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that the number of available pods never drops beneath the required number of replicas
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Read more about deployment strategies here: <a href="https://docs.openshift.com/container-platform/3.11/dev_guide/deployments/deployment_strategies.html">https://docs.openshift.com/container-platform/3.11/dev_guide/deployments/deployment_strategies.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-storage"><a class="anchor" href="#lifecycle-storage"></a>Storage</h4>
<div class="paragraph">
<p>Go to <b class="menuref">Storage</b> page and select <b class="button">Create Storage</b>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> test</p>
</li>
<li>
<p><strong>Access Mode:</strong> RWO</p>
</li>
<li>
<p><strong>Size:</strong> 1 GiB</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of PVs, how they are exported to all nodes, how the Container Runtime maps them into the Container at deployment as an additional file system</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now we will assign this storage to our application. Go to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Deployments</b></span> and select <code>nodetest</code> and select the <code>Configuration</code> tab.
Under the Volumes section, click <code>Add Storage</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of a PVC which locks the storage into the container</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Select the <code>test</code> storage option (This is the one we just created)</p>
</div>
<div class="paragraph">
<p>In the <strong>Mount Path</strong> make sure that the path is unique to you, so make it <code>/usrX</code> (Where X is your assigned ID).
Click <b class="button">Add</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_assign_vol.png" alt="Assign Volumes">
</div>
</div>
<div class="paragraph">
<p>Go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note the redeployment, this is because above is a config change and a new image needs to be build to make this mount point available
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select the first (top) pod in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">id</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will print the unique id for this pod, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">uid=1000360000 gid=0(root) groups=0(root),1000360000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now type the following in the terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">df -h</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will report information on the disk space for this pod, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Filesystem                                                 Size  Used Avail Use% Mounted on
overlay                                                     50G  7.3G   43G  15% /
tmpfs                                                       32G     0   32G   0% /dev
tmpfs                                                       32G     0   32G   0% /sys/fs/cgroup
support1.fourways-3631.internal:/srv/nfs/user-vols/vol411  197G  498M  187G   1% /usr1
/dev/xvda2                                                  50G  7.3G   43G  15% /etc/hosts
shm                                                         64M     0   64M   0% /dev/shm
tmpfs                                                       32G   16K   32G   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs                                                       32G     0   32G   0% /proc/acpi
tmpfs                                                       32G     0   32G   0% /proc/scsi
tmpfs                                                       32G     0   32G   0% /sys/firmware</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the volume create earlier mounted under <code>/usrX</code>.</p>
</div>
<div class="paragraph">
<p>Type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ps -ef</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the ‘it thinks it is an OS’ concept, explain SELinux constraints around the ‘ps -ef’,
note the addition of the new disk at the mount point provided at the PV creation</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s go to the volume mount point and create a file in the root:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /usrX
touch test.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>List the contents of the folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ls -alZ</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see a list of directories and files, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">drwxrwxrwx. root       root  system_u:object_r:nfs_t:s0                     .
drwxr-xr-x. root       root  system_u:object_r:container_file_t:s0:c9,c19   ..
-rw-r--r--. 1000360000 65534 system_u:object_r:nfs_t:s0                     test1.txt</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the selinux constraints</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now, in the CLI (NOT the terminal we have been using just now), do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get pods -o wide</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see a list of all pods, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">NAME               READY   STATUS      RESTARTS   AGE   IP          NODE                           NOMINATED NODE
nodetest-1-build   0/1     Completed   0          1h    10.1.4.8    node1.jhb-94d8.internal   &lt;none&gt;
nodetest-2-5lcdq   1/1     Running     0          15m   10.1.4.12   node1.jhb-94d8.internal   &lt;none&gt;
nodetest-2-7dnjv   1/1     Running     0          12m   10.1.4.14   node1.jhb-94d8.internal   &lt;none&gt;
nodetest-2-nfnlf   1/1     Running     0          12m   10.1.4.13   node1.jhb-94d8.internal   &lt;none&gt;</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Find two Pods on physically separate Nodes - take note of the Pod names - explain the format, name-(x)-(randomchars)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select the first (top) pod in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /usrX
vi test.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once in <code>vi</code>, press <strong>i</strong> to enter <strong>insert</strong> mode.</p>
</div>
<div class="paragraph">
<p>Now type something, example: <code>Hello World</code>.</p>
</div>
<div class="paragraph">
<p>Then press <strong>Esc</strong> (to exit the insert mode) and then <strong>:wq</strong> to write and quit vi.
You can do a <code>cat</code> to make sure the contents is saved in the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cat test.txt
Hello world</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now go back to the <b class="menuref">Overview</b> page.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select any pod except the first (top) one in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /usrX
cat test.txt
Hello world</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the file is available on all pods.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the single file in persisted storage across multiple physical nodes</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-config-maps"><a class="anchor" href="#lifecycle-config-maps"></a>Config Maps</h4>
<div class="paragraph">
<p>Navigate to <span class="menuseq"><b class="menu">Resources</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Config Maps</b></span> and then click <b class="button">Create Config Map</b></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Discuss the nature of config maps as environment vars</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Enter the following in the fields:
* <strong>Name:</strong> configmapenv
* <strong>Key:</strong> CONFIGENV
* <strong>Value:</strong> somevaluefortheenv</p>
</div>
<div class="paragraph">
<p>Then click <b class="button">Create</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_config_map.png" alt="Config Map">
</div>
</div>
<div class="paragraph">
<p>Navigate to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Deployments</b></span> select <code>nodetest</code> and then the <code>Environment</code> Tab.</p>
</div>
<div class="paragraph">
<p>In the <code>Environment From</code> section, select the <code>configmapenv</code> we just created.</p>
</div>
<div class="paragraph">
<p>Click the <code>Add ALL Values from Config Map or Secret</code> link and then <b class="button">Save</b>.</p>
</div>
<div class="paragraph">
<p>Now go back to the <b class="menuref">Overview</b> page, and watch the deployment finish.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select the first (top) pod in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">env | grep CONFIGENV</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the key/value we just created.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the relevance of the environment variable - not part of the deployment, applied at the container level</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s create another config map.
Navigate back to <span class="menuseq"><b class="menu">Resources</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Config Maps</b></span> and then click <b class="button">Create Config Map</b></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Discuss the nature of config maps as an embedded overlay file (overwriting image contents)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Enter the following in the fields:
* <strong>Name:</strong> configmapfile
* <strong>Key:</strong> myapp.conf
* <strong>Value:</strong> hello!</p>
</div>
<div class="paragraph">
<p>Then click <b class="button">Create</b></p>
</div>
<div class="paragraph">
<p>Navigate to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Deployments</b></span> select <code>nodetest</code> and then the <code>Configuration</code> Tab.</p>
</div>
<div class="paragraph">
<p>In the <code>Volumes</code> section, select <code>Add Config Files</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Source:</strong> configmapfile</p>
</li>
<li>
<p><strong>Mount Path:</strong> /config/app</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Add</b></p>
</div>
<div class="paragraph">
<p>Now go back to the <b class="menuref">Overview</b> page, and watch the deployment finish.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select the first (top) pod in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd /config/app
cat myapp.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the value we just created.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the config map being written as a file into the container file system - external to image
Discuss the difference between configmaps and secrets</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lifecycle-secrets"><a class="anchor" href="#lifecycle-secrets"></a>Secrets</h4>
<div class="paragraph">
<p>Navigate to <span class="menuseq"><b class="menu">Resources</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Secrets</b></span> and then click <b class="button">Create Secrets</b>.
Enter the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Secret Type:</strong> Generic Secret</p>
</li>
<li>
<p><strong>Secret Name:</strong> nodetestsecret</p>
</li>
<li>
<p><strong>Key:</strong> mypassword</p>
</li>
<li>
<p><strong>Value:</strong> mydodgypassword</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_secret.png" alt="Secret">
</div>
</div>
<div class="paragraph">
<p>Now select the newly created secret <code>nodetestsecret</code> and then click <b class="button">Add to Application</b>.</p>
</div>
<div class="paragraph">
<p>Select the <code>nodetest</code> application and click <b class="button">Save</b>.</p>
</div>
<div class="paragraph">
<p>Now go back to the <b class="menuref">Overview</b> page, and watch the deployment finish.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> and select the first (top) pod in the <code>Pods</code> section.
Select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">env | grep password</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the encrypted nature of the secret outside of the Pods</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now, in the CLI (NOT the terminal we have been using just now), do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc describe secret nodetestsecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will show the secret, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Name:         nodetestsecret
Namespace:    sandbox-user1
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

Type:  Opaque

Data
====
mypassword:  15 bytes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now look at the secret in the object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc edit secret nodetestsecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here you can see the secret is encrypted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
data:
  mypassword: bXlkb2RneXBhc3N3b3Jk
kind: Secret
metadata:
  creationTimestamp: "2019-07-31T05:09:01Z"
  name: nodetestsecret
  namespace: sandbox-user1
  resourceVersion: "167161"
  selfLink: /api/v1/namespaces/sandbox-user1/secrets/nodetestsecret
  uid: 4f06e44d-b351-11e9-b116-16c647cb1fdc
type: Opaque</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the encryption of the secret at the object level</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle-cleanup"><a class="anchor" href="#lifecycle-cleanup"></a>Clean up</h3>
<div class="paragraph">
<p>Now let&#8217;s clean up everything we did in the <a href="#lifecycle">Simple application lifecycle</a> section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc describe bc nodetest
oc delete all -l "app=nodetest"</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Point out the Label (app=nodetest), explain its relevance, explain the nature of the extensible object model
Explain the clean-up process</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sdn"><a class="anchor" href="#sdn"></a>Software Defined Networking</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the mechanisms of SDN, routes, singular service endpoints and actual service endpoints.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If you have admin rights (you don&#8217;t), you can get the cluster network:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get clusternetwork
NAME      CLUSTER NETWORKS   SERVICE NETWORK   PLUGIN NAME
default   10.1.0.0/16:9      172.30.0.0/16     redhat/openshift-ovs-subnet</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the differences - RHPDS instance will be subnet, which is the flat networking</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s create a new test project using the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc new-project sdntest-userX --description="SDN Test" --display-name="SDN Test"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can make sure you are using the newly created project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get project sdntest-user1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s ad Applications to our new project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc new-app registry.access.redhat.com/rhscl/nodejs-8-rhel7~https://github.com/utherp0/nodejs-ex --name="nodetest1"
oc new-app registry.access.redhat.com/rhscl/nodejs-8-rhel7~https://github.com/utherp0/nodejs-ex --name="nodetest2"</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the lack of a route</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Back in the Web Console. Make sure that you select the <code>SDN Test</code> Project in the project dropdown.</p>
</div>
<div class="paragraph">
<p>In the <b class="menuref">Overview</b> page you will see the two nodetest application we just created.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> for nodetest1, under the <code>Status</code> section you will see the IP address for this Pod.</p>
</div>
<div class="paragraph">
<p>Navigate to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Services</b></span>. Note the Cluster IP&#8217;s for nodetest1 and nodetest2.</p>
</div>
<div class="paragraph">
<p>Now go back to <b class="menuref">Overview</b> and select the <kbd>Pod ring</kbd> for nodetest1.</p>
</div>
<div class="paragraph">
<p>Select the <code>Terminal</code> tab and type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl http://localhost:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return the basic HTML for the node.js application, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test Page for nodejs-ex app&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;b&gt;Test page for nodejs-ex&lt;/b&gt; - served from res.render.

This is a simple webpage rendered from the node.js application at the root endpoint.&lt;p/&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the resolution of localhost and the output returned</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now do the same, but using the pod name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl http://nodetest1:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the same response.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the resolution of the short-name for the service</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s see if we can see the other Pod from here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl http://nodetest2:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the name is resolved to the correct IP for a Pod.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the namespace resolution</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s now do a full name resolution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">getent hosts nodetest1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the Cluster IP and the full URL for nodetest1, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">172.30.179.70   nodetest1.sdntest-user1.svc.cluster.local</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the full name resolution and the Cluster IP of the service</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now curl the full URL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl http://nodetest1.sdntest-userX.svc.cluster.local:8080</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will again get the test page as a response.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Talk about the conversion between the Cluster IP and the node endpoint</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s try the person next to you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl http://nodetest1.sdntest-userX+1.svc.cluster.local:8080</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the resolution on a flat SDN. Explain the difference with multi-tenant. Explain network-policy above that</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s create a route, navigate to <span class="menuseq"><b class="menu">Applications</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Route</b></span> and click <b class="button">Create Route</b>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> canaryroute</p>
</li>
<li>
<p><strong>Service:</strong> nodetest1</p>
</li>
<li>
<p><strong>Alternate Services:</strong> select 'Split Traffic Across Multiple Services'</p>
<div class="ulist">
<ul>
<li>
<p><strong>Service:</strong> nodetest2</p>
</li>
<li>
<p><strong>Service Weights:</strong> 80% nodetest1, 20% nodetest2</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Create</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_route.png" alt="Create Route">
</div>
</div>
<div class="paragraph">
<p>Now select the newly created <code>canaryroute</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the load-balancing</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If you go back to the <b class="menuref">Overview</b> page, note that both applications has got the same external route.</p>
</div>
<div class="paragraph">
<p>Click on the <kbd>Pod ring</kbd> of nodetest1, select the <code>Terminal</code> tab and then type the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">getent hosts canaryroute-sdntest-userX.(domain)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return the IP of the OCP router, example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">3.219.175.39    canaryroute-sdntest-user1.apps.jhb-94d8.openshiftworkshop.com</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the IP returned is the IP of the OCP router, and why that is</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rbac"><a class="anchor" href="#rbac"></a>User Role based access control</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>TODO</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Explain the nature of the user model in OCP compared to the visibility of objects.
Explain admin, edit, view and <strong>no</strong> access models</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Using the project dropdown, go back to the <code>Sandbox</code> project we create earlier.</p>
</div>
<div class="paragraph">
<p>Go to the <span class="menuseq"><b class="menu">Resources</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Membership</b></span> page. (using the left side menu)</p>
</div>
<div class="paragraph">
<p>You will see 3 tabs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Users:</strong> This should list your user (userX).</p>
</li>
<li>
<p><strong>Groups:</strong> - TODO: explain the difference between the full name system:serviceaccount:sandbox-userX and the 'all' groups system:serviceaccounts:projectName</p>
</li>
<li>
<p><strong>Service Accounts</strong> - TODO: explain the concept of a 'virtual' user within the namespace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the <code>Users</code> Tab, click <b class="button">Edit Membership</b> and add the attendee next to you as a user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name:</strong> UserX+1</p>
</li>
<li>
<p><strong>Roles:</strong> admin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click <b class="button">Add</b></p>
</div>
<div class="paragraph">
<p>You will now see the project assigned to you in your Project list,
example <code>User2</code> can see <code>sandbox-user-1</code> project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenshot_users.png" alt="User access">
</div>
</div>
<div class="paragraph">
<p>(click on the OPENSHIFT CONTAINER PLATFORM logo)</p>
</div>
<div class="paragraph">
<p>Now do a build of the application in that project.</p>
</div>
<div class="paragraph">
<p>Next, let&#8217;s remove the access from that user using CLI.</p>
</div>
<div class="paragraph">
<p>First make sure you are using the correct project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc project sandbox-userX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next remove the access:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc adm policy remove-role-from-user admin userX+1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now go back to your project list and note that your access has been removed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pipeline"><a class="anchor" href="#pipeline"></a>CICD Pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this exercise we will be using some downloadable information - explain the mechanics to the attendees as it is done
Show the <a href="https://github.com/utherp0/workshop_material" class="bare">https://github.com/utherp0/workshop_material</a> repo - explain the need for it (the groovy_pipeline.sh script will pre-install the application, pre-install the pipeline and kick-off the download of the Jenkins container
Explain (as with the slides) the role that the ‘pipeline’ type of build plays - an extended mechanism to allow the whole CICD chain to be encompassed in a single, repeatable OCP build
[oc] In the appropriate oc window create a directory for the git source - suggestion is mkdir ~/git
[oc] ‘cd ~/git’
[oc] ‘git clone <a href="https://github.com/utherp0/workshop_material’" class="bare">https://github.com/utherp0/workshop_material’</a>
[oc] ‘cd workshop_material’
[oc] ‘cd attendee’
[oc] ‘ls’
Explain what the script does. Explain the need for the pipeline_complex_bc.yaml file (and the alternative ways of injecting the pipeline script into the buildconfig)
[oc] ‘cat groovy_pipeline.sh’
Explain the need for changing the namespace - the fact namespaces are unique within a cluster.
[oc] sed -i ‘s/PROJECT.NAME/{uniquenameforattendee}/g’ groovy_pipeline.sh
[oc] ‘cat groovy_pipeline.sh’ to make sure the project name is correct
[oc] sed -i ‘s/PROJECT.NAME/{uniquenameforattendee}/g’ pipeline_complex_bc.yaml
[oc] oc whoami
Make sure the attendee is logged on to the OCP cluster
[oc] ./groovy_pipeline.sh
Explain what the script is doing as it runs - the script installs the nodetest app then waits for it to appear, and then installs and starts the pipeline process
Once the process has started, direct the attendees back to the UI
[UI] Go to the project/Overview - Watch the Jenkins Ephemeral Pod startup - explain why it takes so long and what it is doing - the creation of a buildconfig that had a pipeline type automatically creates the Jenkins Pod if one doesn’t exist
[UI] Once the Pod turns blue, click on the Route - THIS MAY TAKE A WHILE - walk the attendees through logging on to the Jenkins instance
[UI] Builds/Pipelines - show the stages running, explain what each is doing, refer to the Groovy script
[UI] When the pipeline completes (address issues if not - usually a naming convention of the project, if so correct the pipeline_complex_bc.yaml and show how to a: oc delete bc x, and b: oc create -f pipeline_complex_bc.yaml
[UI] Overview - show the six pods running, point out the deployment number, Discuss the removal of the triggers on the deployment and why (with automation in place the creation of an image would force a deployment which would interfere with the pipeline, we disable the deployment on image and config triggers so the pipeline can control it all)
Discuss complexities of pipelines, the addition of Jenkins commands into the Groovy etc
[UI] Go back to the Jenkins Route - select Open Blue Ocean. Choose the Pipeline, click on the build, show the prettier Jenkins UI
[UI] Builds/Pipelines - click on complexpipeline - Actions/Edit
[UI] Replace the line ‘dc,scale(“--replicas=6”)’ with ‘dc.scale(“--replicas=4”)’
[UI] Start Pipeline, then switch to Overview
Explain what is happening, show the Pod count changing</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="wrapup"><a class="anchor" href="#wrapup"></a>Wrap-up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Allow for a Q/A session on the previous chapters. Use the system to demonstrate behaviour asked for by attendees
OPTIONAL - show the RHOAR launchpad and walk them through an example
OPTIONAL - talk about futures/Operators/OCP4 - demo operators on 3.11 if possible
OPTIONAL - walk the attendees, <strong>if</strong> they are .NET devs, through the <a href="https://github.com/utherp0/meowworldforum" class="bare">https://github.com/utherp0/meowworldforum</a> app (currently .NET Core 1.0 but will be updated soon)</p>
</div>
<div style="page-break-after: always;"></div>
<div class="imageblock text-center">
<div class="content">
<img src="images/redhat.png" alt="Red Hat">
</div>
</div>
<table class="tableblock frame-none grid-none stripes-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Ian Uther Lawson</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Principal Domain Solution Architect</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><a href="mailto:uther@redhat.com">uther@redhat.com</a></p></td>
</tr>
</tbody>
</table>
<hr>
<table class="tableblock frame-none grid-none stripes-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Original workshop done by Ian 'Uther' Lawson</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.0<br>
Last updated 2019-07-31 13:49:25 +0100
</div>
</div>
</body>
</html>